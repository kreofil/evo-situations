//==============================================================================
// multimethod.c - содержит функции, опрделяющие реализацию мультиметода
// для чистого процедурного подхода с использованием для фигуры объединения
//==============================================================================

#include <stdio.h>
#include "figure-rectangle.h"
#include "figure-triangle.h"

//------------------------------------------------------------------------------
// Обобщающая функция, задающая абстрактный мультиметод
void Multimethod<Figure* f1, Figure* f2>(FILE* ofst) {} //= 0;

//------------------------------------------------------------------------------
// Обработчик специализации для двух прямоугольников
void Multimethod<Figure.rect* r1, Figure.rect* r2>(FILE* ofst) {
  fprintf(ofst, "Rectangle - Rectangle Combination\n");
}

//------------------------------------------------------------------------------
// Обработчик специализации для прямоугольника и треугольника
void Multimethod<Figure.rect* r1, Figure.trian* t2>(FILE* ofst) {
  fprintf(ofst, "Rectangle - Triangle Combination\n");
}

//------------------------------------------------------------------------------
// Обработчик специализации для треугольника и прямоугольника
void Multimethod<Figure.trian* t1, Figure.rect* r2>(FILE* ofst) {
  fprintf(ofst, "Triangle - Rectangle Combination\n");
}

//------------------------------------------------------------------------------
// Обработчик специализации для двух треугольников
void Multimethod<Figure.trian* t1, Figure.trian* t2>(FILE* ofst) {
  fprintf(ofst, "Triangle - Triangle Combination\n");
}

//==============================================================================
// Вычисление по различным формулам в качестве нагрузки мультиметода
// Без обработки всех альтернатив вряд ли можно обойтись без их анализа
//==============================================================================

//------------------------------------------------------------------------------
// Обобщающая функция, задающая абстрактный мультиметод
int MultimethodDiffFunc<Figure* f1, Figure* f2>() {
  return 0;
} //= 0;

//------------------------------------------------------------------------------
// Обработчик специализации для двух прямоугольников
int MultimethodDiffFunc<Figure.rect* r1, Figure.rect* r2>() {
  // Возвращает сумму площадей двух прямоугольников
  return (r1->@x * r1->@y) + (r2->@x * r2->@y);
}

//------------------------------------------------------------------------------
// Обработчик специализации для прямоугольника и треугольника
int MultimethodDiffFunc<Figure.rect* r1, Figure.trian* t2>() {
  // Возвращает общую сумму сторон прямоугольника и треугольника
  return r1->@x + r1->@y + t2->@a + t2->@b + t2->@c;
}

//------------------------------------------------------------------------------
// Обработчик специализации для треугольника и прямоугольника
int MultimethodDiffFunc<Figure.trian* t1, Figure.rect* r2>() {
  // Возвращает разность между суммами сторон прямоугольника и треугольника
  return (t1->@a + t1->@b + t1->@c) - (r2->@x + r2->@y);
}

//------------------------------------------------------------------------------
// Обработчик специализации для двух треугольников
int MultimethodDiffFunc<Figure.trian* t1, Figure.trian* t2>() {
  // Возвращает произведение сумм сторон двух треугольников
  return (t1->@a + t1->@b + t1->@c) * (t2->@a + t2->@b + t2->@c);
}

