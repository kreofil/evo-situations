// multimethod-continue.c - содержит функции, опрeделяющие реализацию
// мультиметода для добавленного круга
//==============================================================================

#include <stdio.h>
#include "figure-rectangle.h"
#include "figure-triangle.h"
#include "figure-circle.h"

//------------------------------------------------------------------------------
// Обобщающая функция, задающая абстрактный мультиметод
// void Multimethod<Figure* f1, Figure* f2>(FILE* ofst);

//------------------------------------------------------------------------------
// Обработчик специализации для прямоугольника и круга
void Multimethod<Figure.rect* r1, Figure.circ* c2>(FILE* ofst) {
  fprintf(ofst, "Rectangle - Circle Combination\n");
}

//------------------------------------------------------------------------------
// Обработчик специализации для треугольника и круга
void Multimethod<Figure.trian* r1, Figure.circ* c2>(FILE* ofst) {
  fprintf(ofst, "Triangle - Circle Combination\n");
}

//------------------------------------------------------------------------------
// Обработчик специализации для круга и прямоугольника
void Multimethod<Figure.circ* c1, Figure.rect* r2>(FILE* ofst) {
  fprintf(ofst, "Circle - Rectangle Combination\n");
}

//------------------------------------------------------------------------------
// Обработчик специализации для круга и треугольника
void Multimethod<Figure.circ* c1, Figure.trian* t2>(FILE* ofst) {
  fprintf(ofst, "Circle - Triangle Combination\n");
}

//------------------------------------------------------------------------------
// Обработчик специализации для двух кругов
void Multimethod<Figure.circ* c1, Figure.circ* c2>(FILE* ofst) {
  fprintf(ofst, "Circle - Circle Combination\n");
}

//==============================================================================
// Вычисление периметров в качестве нагрузки мультиметода
// Хотя в целом их можно было распознать и без мультиметода.
//==============================================================================

//------------------------------------------------------------------------------
// Обработчик специализации для прямоугольника и круга
int MultimethodDiffFunc<Figure.rect* r1, Figure.circ* c2>() {
  // Возвращает разность между произведениями прямоугольника и радиусом круга
  return (r1->@x * r1->@y) - (c2->@r * c2->@r);
}

//------------------------------------------------------------------------------
// Обработчик специализации для треугольника и круга
int MultimethodDiffFunc<Figure.trian* t1, Figure.circ* c2>() {
  // Возвращает разность между периметром треугольника и диаметром круга
  return (t1->@a + t1->@b + t1->@c) - 2 * c2->@r;
}

//------------------------------------------------------------------------------
// Обработчик специализации для круга и прямоугольника
int MultimethodDiffFunc<Figure.circ* c1, Figure.rect* r2>() {
  // Разность между диаметром круга и суммой двух сторон прямоугольника
  return 2 * c1->@r - (r2->@x + r2->@y);
}

//------------------------------------------------------------------------------
// Обработчик специализации для круга и треугольника
int MultimethodDiffFunc<Figure.circ* c1, Figure.trian* t2>() {
  // Сумма радиуса круга и периметра треугольника
  return c1->@r * (t2->@a + t2->@b + t2->@c);
}

//------------------------------------------------------------------------------
// Обработчик специализации для двух кругов
int MultimethodDiffFunc<Figure.circ* c1, Figure.circ* c2>() {
  // Произведение радиусов кругов
  return c1->@r * c2->@r;
}

